---
import { getCollection } from "astro:content";

import CoolButton from "../components/CoolButton.astro";
import ContactUs from "../components/ContactUs.astro";
import Festival from "../components/Festival.astro";
import FestivalMarquee from "../components/FestivalMarquee.astro";
import Gallery from "../components/Gallery.astro";
import Headline from "../components/Headline.astro";
import History from "../components/History.astro";
import FrontPage from "../layouts/FrontPage.astro";
import Welcome from "../components/Welcome.astro";
import Marquee from "../components/Marquee.astro";

const allFestivals = await getCollection("festivals");

// Sorting the festivals by startDate
allFestivals.sort((a, b) => {
  return a.data.startDate.getTime() - b.data.startDate.getTime();
});
---

<FrontPage>
  <Welcome />

  <div class="mt-40 w-full">
    <Marquee>
      {allFestivals.map((f, ix) => <FestivalMarquee festival={f} index={ix} />)}
    </Marquee>
    <div class="flex w-full justify-center items-center mt-5">
      <CoolButton href="#festival-lineup-2024">See full lineup</CoolButton>
    </div>
  </div>

  <Headline>Our History</Headline>
  <History />

  <Headline>Gallery</Headline>
  <Gallery />

  <Headline>Festival Lineup 2024</Headline>

  {allFestivals.map((f, ix) => <Festival festival={f} index={ix} />)}

  <Headline>Contact Us</Headline>

  <ContactUs />
</FrontPage>
