---
import { getCollection } from 'astro:content';

import ContactUs from '../components/ContactUs.astro';
import Festival from "../components/Festival.astro";
import Headline from '../components/Headline.astro';
import Layout from "../layouts/Layout.astro";
import Welcome from "../components/Welcome.astro";

const allFestivals = await getCollection('festivals');

// Sorting the festivals by startDate
allFestivals.sort((a, b) => {
  return a.data.startDate.getTime() - b.data.startDate.getTime();
});

---

<Layout>

  <Welcome />

  <Headline>Festival Lineup 2024</Headline>


  {allFestivals.map((f, ix) => (
    <Festival festival={f} index={ix} />
  ))}

  <Headline>Contact Us</Headline>

  <ContactUs />

</Layout>
